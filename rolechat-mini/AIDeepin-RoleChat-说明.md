### 作品说明（议题二：AI 角色扮演语音聊天网页）

#### 1) 面向用户、痛点与用户故事
- **学生/自学者**: 需要以对话方式理解人物思想/学科知识；痛点是枯燥、难坚持、反馈慢。用户故事：我搜索“苏格拉底”，和他语音对话，被引导用问答法澄清概念并获得总结与延伸阅读。
- **职场通识/爱好者**: 想快速沉浸式体验角色（哈利·波特、历史人物）并获得娱乐与启发。用户故事：我选“哈利·波特”，以其世界观设定进行轻量过场式互动，并附带关键台词摘录与情绪化回应。
- **语言学习者**: 想通过角色扮演进行口语练习；痛点是缺少连续可聊的对象与及时纠错。用户故事：我选“英语导师”，系统以苏格拉底风格提问、给出纠错与总结，并提供语音回复。

#### 2) 必要功能与优先级（本次开发范围）
- **P0 多角色搜索与选择**: 角色元数据、系统提示词、头像与标签；支持搜索/推荐。（纳入本次）
- **P0 语音聊天闭环**: 语音输入（ASR）→ 流式文本回复（SSE）→ 语音合成（TTS）播放；文本输入也支持。（纳入本次）
- **P0 LLM 对话与角色技能管线**: 角色世界观一致性、苏格拉底式提问、引用摘录总结、情绪共情等技能编排。（纳入本次≥3技能）
- **P1 聊天历史与上下文记忆**: 轻量记忆（前端持久或后端会话）。
- **P1 角色卡管理**: 角色创建/编辑/分享。
- **P2 RAG/联网搜索**: 角色可检索资料辅助回答。

本次实现：P0 全部 + P1 轻量会话历史（内存/前端）

#### 3) LLM 模型选择
- 备选：**DeepSeek**（推理与性价比）、OpenAI GPT-4o/4.1（通用与多模态能力佳）、通义千问（中文对话流畅）、硅基流动聚合（性价比与OpenAI兼容协议）。
- 选择：**DeepSeek Chat（OpenAI兼容协议）** 作为默认 LLM。理由：
  - 中文/英文对话质量好、价格优势、延迟可控；
  - 采用 OpenAI 兼容接口，易于与现有后端流式对接；
  - 适配“角色技能编排”对自洽、可控的提示工程需求。
- ASR/TTS：采用 OpenAI 兼容生态（如硅基流动/其他兼容平台）或 OpenAI Whisper/tts-1 接口（通过可配置 base_url 与密钥切换）。

#### 4) 期望的角色技能（除语音聊天）
- **世界观一致性（Persona Consistency）**: 用系统提示词强约束角色背景、说话风格、知识边界。
- **苏格拉底式提问（Socratic Questioning）**: 优先以提问启发用户思考，控制追问深度与频率。
- **引用与要点总结（Quotations & TL;DR）**: 在回答末尾给出关键引语/要点清单与行动建议。
- **情绪共情（Affective Mirroring）**: 根据用户语气选择同理或鼓励性的开场短句（简化实现）。

#### 5) 从 langchain4j-aideepin-main 抽取与复用的思想
- 参考点：`SSE` 流式输出、`ASR/TTS` 上下文化配置思路、`模型可插拔` 的策略模式；
- 本项目不直接耦合原仓库复杂依赖（RAG/工作流/图DB），而是以“最小可运行闭环”为目标复用思想并重写代码；
- 关键接口：`/api/roles/search`、`/api/chat/stream`（SSE）、`/api/chat/asr`、`/api/chat/tts`；前端静态页 `rolechat-mini/src/main/resources/static/index.html`。

#### 6) 运行与配置
- Java 17 + Maven；进入 `rolechat-mini` 执行：
  - `mvn clean package -DskipTests`
  - `java -jar target/rolechat-mini-0.0.1-SNAPSHOT.jar`
- 环境变量或 `application.yml`：
  - `LLM_BASE_URL`（默认 `https://api.deepseek.com`）、`LLM_API_KEY`、`LLM_MODEL`
  - `ASR_BASE_URL`、`ASR_API_KEY`、`ASR_MODEL`
  - `TTS_BASE_URL`、`TTS_API_KEY`、`TTS_MODEL`、`TTS_VOICE`
- 访问 `http://localhost:9099/`，搜索并选择角色，发送文本；TTS按钮可播放AI回复（当前ASR/TTS为占位实现，需接入真实服务）。

#### 7) 已实现的≥3项技能
- 世界观一致性；
- 苏格拉底式提问（角色：苏格拉底）；
- 引用与要点总结（TL;DR）；
- 情绪共情（简化语气修饰）。

#### 8) 后续扩展
- 将 ASR/TTS 占位改为真实调用（Whisper/硅基流动/通义等）；
- 增加语音输入按钮与浏览器录音上传；
- 会话持久化、角色市场、自定义技能、RAG 增强与联网检索。
